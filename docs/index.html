<head>
  <title>webstack</title>
  <link rel="shortcut icon" type="image/png" href="favicon.ico">
  <style>
    @import url('https://rsms.me/inter/inter.css');
    html { font-family: 'Inter', sans-serif; }
    @supports (font-variation-settings: normal) {
      html { font-family: 'Inter var', sans-serif; }
    }
    body {
      padding: 32px;
    }
    main,
    section {
      padding: 5px 32px;
    }
    iframe {
      border: none;
      width: 100%;
    }
    .dash-main {
      height: 930px;
    }
    p,
    li {
      line-height: 1.5em;
      max-width: 700px;
    }
  </style>
</head>
<body>
  <main>
    <h1>webstack</h1>
    <p>
      A project to prototype web stacks
      <a href="https://github.com/croaky/webstack">github.com/croaky/webstack</a>
    </p>
    <p>
      API checks from N. California, Montreal, Ireland, Stockholm, and Sydney:
    </p>
  </main>

  <iframe class="dash-main" src="https://webstack.checklyhq.com/"></iframe>

  <section>
    <h2>overview</h2>
    <p>
      When we developers want to provide a JSON API,
      we choose from options for hosting providers, runtimes, and SQL databases.
      This project is <a href="https://dancroak.com">my</a> attempt
      to prototype those options and share what I learn.
    </p>
    <p>
      Hosting providers:
    </p>
    <ul>
      <li><a href="https://deno.com/deploy">Deno Deploy</a></li>
      <li><a href="https://fly.io">Fly.io</a></li>
      <li><a href="https://heroku.com">Heroku</a></li>
      <li><a href="https://railway.app">Railway</a></li>
      <li><a href="https://render.com">Render</a></li>
      <li><a href="https://vercel.com">Vercel</a></li>
    </ul>
    <p>
      Runtimes (frameworks):
    </p>
    <ul>
      <li>Deno (<a href="https://deno.land/std">stdlib</a>)</li>
      <li>Go (<a href="https://pkg.go.dev/std">stdlib</a>)</li>
      <li>Node (<a href="https://expressjs.com/">Express</a>)</li>
      <li>Ruby (<a href="http://sinatrarb.com/">Sinatra</a>)</li>
    </ul>
    <p>
      SQL databases:
    </p>
    <ul>
      <li><a href="https://www.postgresql.org/">Postgres</a></li>
      <li><a href="https://supabase.com/">Supabase</a></li>
    </ul>
    <p>
      Each stack has a healthcheck-style API endpoint that executes a
      <code>SELECT 1</code> to a SQL database
      and responds with JSON <code>{ "status": "ok" }</code>.
    </p>
  </section>

  <section>
    <h2>heroku + ruby + postgres</h2>
    <p>
      From 2009-2017 and 2020-2022, my go-to stack has been Heroku + Ruby +
      Postgres. I'm happy with it as a baseline but there's room for
      improvement.
    </p>
  </section>
  <section>
    <h2>heroku</h2>
    <p>
      For a production app, the key points of my Heroku setup are:
    </p>
    <ul>
      <li>
        Version code in a GitHub repository
      </li>
      <li>
        Open GitHub pull requests w/ Continuous Integration (CI)
      </li>
      <li>
        Merge into <code>main</code> branch to auto-deploy to Heroku staging environment
      </li>
      <li>
        Promote staging manually to production environment in a
        <a href="https://devcenter.heroku.com/articles/pipelines">pipeline</a>
      <li>
        Configure Postgres database with a
        <a
          href="https://devcenter.heroku.com/articles/heroku-postgres-follower-databases">follower</a>
      </li>
    </ul>
  </section>

  <section>
    <h2>ruby</h2>
    <p>
      My favorite parts of Ruby are:
    </p>
    <ul>
      <li>
        <strong>Expressive DSLs</strong> like Sinatra, RSpec, FactoryBot, and
        ActiveRecords migrations.
      </li>
      <li>
        <strong>Iteration</strong> of arrays and hashes with the
        <a href="https://ruby-doc.org/core-3.1.1/Enumerable.html">Enumerable</a>
        module.
      </li>
    </ul>
    <p>
      My least favorite parts are:
    </p>
    <ul>
      <li>
        <strong>Code navigation</strong>. I find it easier to read, debug, and
        navigate Go and TypeScript projects.
      </li>
    </ul>
    <p>
      Relative to other options, Ruby has not been making developers happy. See
      "most loved" in <a href="https://insights.stackoverflow.com/survey">Stack
      Overflow's annual developer survey</a>:
    </p>
    <ul>
      <li>87% Rust</li>
      <li>73% TypeScript</li>
      <li>68% Python</li>
      <li>64% Swift</li>
      <li>63% Go</li>
      <li>62% SQL</li>
      <li>62% Kotlin</li>
      <li>62% JavaScript</li>
      <li>60% HTML/CSS</li>
      <li>56% Bash</li>
      <li>53% Ruby</li>
      <li>49% C++</li>
      <li>47% Java</li>
      <li>40% C</li>
    </ul>
  </section>
</body>
